language: python
# matrix:
#   include:
#     - python: 3.4
#     - python: 3.5
#     - python: 3.6
#     - python: 3.7
#       dist: xenial
#       sudo: required


cache:
  apt: true
  directories:
    - $HOME/.cache/pip
  pip: true

sudo: false

before_cache:
  - rm -f $HOME/.cache/pip/log/debug.log

# command to install dependencies
addons:
  apt:
    packages:
    - libatlas-dev
    - liblapack-dev
    - libatlas-base-dev
    - gfortran

env:
  matrix:
    - DISTRIB="conda" PYTHON_VERSION="3.4"
    - DISTRIB="conda" PYTHON_VERSION="3.5"
    - DISTRIB="conda" PYTHON_VERSION="3.6"
    - DISTRIB="conda" PYTHON_VERSION="3.7" DOCPUSH="true"

install:
  - source ci_scripts/install.sh

# command to run tests, e.g. python setup.py test
script:
- nosetests -sv --with-coverage --cover-package=ConfigSpace test

after_success:
  - source ci_scripts/create_doc.sh $TRAVIS_BRANCH "doc_result"
  # - codecov

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  keep-history: true
  committer-from-gh: true
  on:
    branch: master
  local_dir: doc/$TRAVIS_BRANCH